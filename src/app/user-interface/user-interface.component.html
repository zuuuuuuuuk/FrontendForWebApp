<div class="decorDiv"></div>

<div class="userCategNav">
      <div class="mainCategDiv">
    <ul [class.active]="activePanel === 'userInfo'" (click)="switchPanel('userInfo')">Profile Info</ul>
    <ul [class.active]="activePanel === 'orders'" (click)="switchPanel('orders')">My Orders</ul>
  </div>
</div>

<div class="mainDiv">


    <div class="userInfoDiv">
          
        <div class="userDiv" *ngIf="!userEditing">
            <i class="profilePic fa-solid fa-user-tie"></i>
            <h3>e-mail: {{user?.email}}</h3>
            <h5>firstname: {{user?.firstName}}</h5>
            <h5>lastname: {{user?.lastName}}</h5>
            <h6 class="userRole">user role: {{user?.role == 0 ? 'user' : user?.role == 1 ? 'manager' : user?.role == 2 ? 'Admin' : 'role not assigned'}}</h6>
            <h6>profile created: {{user?.createdAt}}</h6>
            <i (click)="userEditing = true"  *ngIf="activePanel === 'userInfo' && !userEditing" class="editLogo fa-solid fa-user-pen"></i>
        </div>

                <div class="userDiv" *ngIf="userEditing">
           <i class="profilePic fa-solid fa-user-tie"></i>
            <h3>e-mail: {{user?.email}}</h3>
            <div class="userEditDiv">
                <div class="inps">
            <input placeholder="{{user?.firstName}}" #firstnameInp class="firstnameInp" type="text">
            <input placeholder="{{user?.lastName}}" #lastnameInp class="lastnameInp" type="text">
            </div>
            <button (click)="updateUser(firstnameInp.value, lastnameInp.value)">apply changes</button>
            </div>
            <h6 class="userRole">user role: {{user?.role == 0 ? 'user' : user?.role == 1 ? 'manager' : user?.role == 2 ? 'Admin' : 'role not assigned'}}</h6>
            <h6>profile created: {{user?.createdAt}}</h6>
             <i *ngIf="userEditing" (click)="userEditing = false" class="hideEditLogo fa-solid fa-eye-slash"></i>
            <i *ngIf="activePanel === 'userInfo' && !userEditing" class="editLogo fa-solid fa-user-pen"></i>
        </div>

        
    </div>

    <div class="ordersDiv" *ngIf="activePanel === 'orders'">
       
        <h4 class="myOrdersh4">my orders:</h4>
      
        <div class="divDec">
        
            <p *ngIf="fullOrders.length === 0">you dont have any orders</p>
      
            <div class="decorOrdersDiv">
        
                <div class="ordersContainer" *ngFor="let order of fullOrders">
            <div class="orderCard">
                <p class="orderId">order id: #{{order.id}}</p>
       <div class="delivery-tracker">
  <div class="fill-bar" [style.width.%]="getFillWidthPercent(order.status)"></div>

  <div class="status-steps">
    <div class="status-step" *ngFor="let s of statusSteps">
      {{ s }}
    </div>
  </div>

  <i class="fas fa-motorcycle deliveryman" [style.left.%]="getFillWidthPercent(order.status)"></i>
</div>
                <div class="orderItems" *ngFor="let item of order.orderItems">
                    <p>product name: {{item.productName}}</p>
                    <p>quantity: {{item.quantity}}</p>
                    <p>price: {{item.price}} $</p>
                    <p *ngIf="item.discountedPrice > 0">discounted price: {{item.discountedPrice}} $</p>
                </div>
            </div>
            
            </div>
            </div>
        </div>

    </div>


</div>
